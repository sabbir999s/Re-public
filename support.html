<!DOCTYPE html>
<html lang="bn">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <title>Support - Red Rose ЁЯМ╣</title>
  <script src="https://sad.adsgram.ai/js/sad.min.js"></script>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.14.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.14.1/firebase-firestore-compat.js"></script>
  <link rel="stylesheet" href="style.css" />
</head>
<body>

  <header class="header">
    <div class="profile">
      <img id="user-avatar" src="" alt="Avatar" class="avatar" />
      <div class="user-info">
        <div class="name-row">
          <p id="user-name" class="username">рж▓рзЛржб рж╣ржЪрзНржЫрзЗ...</p>
          <div class="verified-badge">Verified</div>
        </div>
        <p class="balance">Balance: <span id="balance">0</span>рз│</p>
      </div>
    </div>
  </header>

  <main class="main-content">
    <h1>Supprot</h1>

    <div class="support-card">
      <h3>рж╕ржорж╕рзНржпрж╛ рж╣рж▓рзЗ рж╕рж╛ржерзЗ ржпрзЛржЧрж╛ржпрзЛржЧ ржХрж░рзБржи</h3>
      <p>ржЖржорж░рж╛ рзирзк/рзн рж╕рж╛ржкрзЛрж░рзНржЯ ржжрж┐ржпрж╝рзЗ ржерж╛ржХрж┐</p>

      <div class="btn-group">
        <button onclick="window.open('https://t.me/Lalgulap999s')" class="btn-primary">Telegram</button>
        <button onclick="window.open('https://wa.me/+8801302390837')" class="btn-success">WhatsApp</button>
      </div>

      <div class="faq-section">
        <h4>ржкрзНрж░рж╢рзНржирзЛрждрзНрждрж░ (FAQ)</h4>
        <div class="faq-item">
          <p class="question">ржХрзАржнрж╛ржмрзЗ рж░рзЗржлрж╛рж░ ржХрж░ржм?</p>
          <p class="answer">рж╣рзЛржорзЗ ржЧрж┐ржпрж╝рзЗ "Copy Link" ржХрзНрж▓рж┐ржХ ржХрж░рзБржи тЖТ рж╢рзЗржпрж╝рж╛рж░ ржХрж░рзБржиред</p>
        </div>
        <div class="faq-item">
          <p class="question">ржЙржЗржержбрзНрж░ ржХрждржжрж┐ржи рж▓рж╛ржЧрзЗ?</p>
          <p class="answer">рзирзк ржШржгрзНржЯрж╛рж░ ржоржзрзНржпрзЗ ржмрж┐ржХрж╛рж╢/ржиржЧржжрзЗ ржкрзЗржорзЗржирзНржЯред</p>
        </div>
      </div>
    </div>
  </main>

 <nav class="bottom-nav">
  <button class="nav-item" onclick="goToHome()">Home</button>
  <button class="nav-item active">Support</button>
  <button class="nav-item" onclick="goToTasks()">Tasks</button>
  <button class="nav-item"onclick="goToWithdraw()">Withdraw</button>
</nav>

    <script>
    // support.html-ржПрж░ ржЬржирзНржп рж╕ржорзНржкрзВрж░рзНржг ржирждрзБржи JavaScript
const firebaseConfig = {
  apiKey: "AIzaSyCmlgT1e5tWCWQ6yKSO6Z3vd8EJqdgso8A",
  authDomain: "redroseadmin.firebaseapp.com",
  projectId: "redroseadmin",
  storageBucket: "redroseadmin.firebasestorage.app",
  messagingSenderId: "984186362373",
  appId: "1:984186362373:web:5e1e60aead3b468d875a6c",
  measurementId: "G-4HVGTVR3DB"
};

firebase.initializeApp(firebaseConfig);
const db = firebase.firestore();

const tg = window.Telegram.WebApp;
tg.ready();
tg.expand();

const user = tg.initDataUnsafe.user;
const userId = user?.id.toString() || 'unknown';
const userRef = db.collection('users').doc(userId);

// ржЧрзНрж▓рзЛржмрж╛рж▓ ржирзЗржнрж┐ржЧрзЗрж╢ржи ржлрж╛ржВрж╢ржи
function goToHome() { window.location.href = 'index.html'; }
function goToSupport() { window.location.href = 'support.html'; }
function goToTasks() { window.location.href = 'tasks.html'; }
function goToWithdraw() { window.location.href = 'withdraw.html'; }

// ===========================================
// ЁЯФе ржирждрзБржи ржХрзЛржб рж╢рзБрж░рзБ: ржмрзНржпрж╛ржи/рж╕рж╛рж╕ржкрзЗржирж╢ржи ржПржмржВ ржкржкржЖржк ржлрж┐ржХрзНрж╕
// ===========================================

// ржкржк-ржЖржкрзЗрж░ HTML рж╕рзНржЯрзНрж░рж╛ржХржЪрж╛рж░ (ржЖржкржбрзЗржЯ ржХрж░рж╛: ржжрзБржЯрж┐ ржмрж╛ржЯржи рж╕рж╛ржкрзЛрж░рзНржЯ)
function getPopupHTML(title, message, primaryButtonText = null, primaryButtonAction = null, secondaryButtonText = null, secondaryButtonAction = null) {
  return `
    <div id="dynamic-popup-overlay" class="popup-overlay" style="
        position: fixed; top: 0; left: 0; right: 0; bottom: 0; 
        background: rgba(0, 0, 0, 0.9); z-index: 9999; display: flex; 
        justify-content: center; align-items: center; backdrop-filter: blur(8px);">
      <div class="popup-card" style="
        background: var(--card-bg); padding: 30px; border-radius: 20px; 
        width: 90%; max-width: 350px; text-align: center; border: 2px solid var(--neon);
        box-shadow: 0 0 40px rgba(0, 170, 255, 0.7);">
        <h2 style="color: var(--success); margin-bottom: 15px; font-size: 20px;">${title}</h2>
        <p style="color: var(--text); font-size: 16px; line-height: 1.6;">${message}</p>
        ${primaryButtonText ? `<button id="popup-primary-btn" class="btn-primary" style="margin-top: 25px; width: 100%; background: #ff4444;">${primaryButtonText}</button>` : ''}
        ${secondaryButtonText ? `<button id="popup-secondary-btn" class="btn-secondary" style="margin-top: 10px; width: 100%; background: #555; color: #fff;">${secondaryButtonText}</button>` : ''}
      </div>
    </div>
  `;
}

// рж╕рж╛рж╕ржкрзЗржирж╢ржи рж╢рзЗрж╖ рж╣рж▓рзЗ ржмрж╛ ржорзНржпрж╛ржирзБрзЯрж╛рж▓ ржЖржиржмрзНржпрж╛ржи рж╣рж▓рзЗ ржжрзЗржЦрж╛ржирзЛрж░ ржЬржирзНржп
function showCongratulationsPopup(message) {
    const popupHTML = getPopupHTML(
        'ЁЯОЙ ржЕржнрж┐ржиржирзНржжржи!',
        message,
        'ржЕрзНржпрж╛ржкржЯрж┐ рж░рж┐рж▓рзЛржб ржХрж░рзБржи'
    );
    document.body.insertAdjacentHTML('beforeend', popupHTML);
    
    // Primary button logic
    const primaryBtn = document.getElementById('popup-primary-btn');
    if (primaryBtn) {
        primaryBtn.style.background = '#00cc66'; // Green for success
        primaryBtn.onclick = () => {
            document.getElementById('dynamic-popup-overlay').remove();
            window.location.reload(); 
        };
    }

    tg.BackButton.hide();
}

// рж╕рж╛рж╕ржкрзЗржирж╢ржирзЗрж░ ржЬржирзНржп ржирждрзБржи ржЯрж╛ржЗржорж╛рж░ ржлрж╛ржВрж╢ржи
function startSuspensionTimer(bannedUntilDate, popupElement) {
    const timerElement = document.createElement('p');
    timerElement.id = 'suspension-timer';
    timerElement.style.color = 'var(--text)';
    timerElement.style.marginTop = '10px';
    
    // ржЯрж╛ржЗржорж╛рж░ ржкржк-ржЖржк ржХрж╛рж░рзНржбрзЗрж░ ржоржзрзНржпрзЗ ржврзБржХрж╛ржирзЛ
    const popupCard = popupElement.querySelector('.popup-card');
    const messageElement = popupCard.querySelector('p'); 
    messageElement.insertAdjacentElement('afterend', timerElement);

    const updateTimer = async () => {
        const now = new Date();
        const diff = bannedUntilDate.getTime() - now.getTime();

        if (diff <= 1000) {
            clearInterval(window.suspensionInterval);
            timerElement.textContent = 'рж╕рж╛рж╕ржкрзЗржирж╢ржи рж╢рзЗрж╖! ржЖржиржмрзНржпрж╛ржи ржХрж░рж╛ рж╣ржЪрзНржЫрзЗ...';
            
            // Firebase-ржП рж╕рзНржЯрзНржпрж╛ржЯрж╛рж╕ ржЖржкржбрзЗржЯ
            await userRef.update({
                isBanned: false,
                bannedUntil: firebase.firestore.FieldValue.delete()
            });

            // ржкрзБрж░рзЛржирзЛ ржкржкржЖржк ржмржирзНржз ржХрж░рзБржи
            if (document.getElementById('dynamic-popup-overlay')) {
                document.getElementById('dynamic-popup-overlay').remove();
            }
            // ржХржВржЧрзНрж░рж╛ржЪрзБрж▓рзЗрж╢ржи ржкржкржЖржк ржжрзЗржЦрж╛ржи
            showCongratulationsPopup('ржЖржкржирж╛рж░ рж╕рж╛рж╕ржкрзЗржирж╢ржи рж╢рзЗрж╖ рж╣рзЯрзЗржЫрзЗред ржЖржкржирж┐ ржПржЦржи ржЕрзНржпрж╛ржкржЯрж┐ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рждрзЗ ржкрж╛рж░ржмрзЗржи!');
            
            return;
        }

        const days = Math.floor(diff / (1000 * 60 * 60 * 24));
        const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
        const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
        const seconds = Math.floor((diff % (1000 * 60)) / 1000);

        timerElement.innerHTML = `рж╕рж╛рж╕ржкрзЗржирж╢ржи рж╢рзЗрж╖ рж╣ржмрзЗ: **${days} ржжрж┐ржи ${hours} ржШржгрзНржЯрж╛ ${minutes} ржорж┐ржирж┐ржЯ ${seconds} рж╕рзЗржХрзЗржирзНржб**`;
    };

    updateTimer();
    window.suspensionInterval = setInterval(updateTimer, 1000);
}

// ржмрзНржпрж╛ржи ржкржк-ржЖржк ржлрж╛ржВрж╢ржиржЯрж┐ржХрзЗ ржЖржкржбрзЗржЯ ржХрж░рж╛ 
function showBanPopup(isBanned, bannedUntil) {
    let message = '';
    let title = 'тЫФя╕П ржПржХрж╛ржЙржирзНржЯ ржмрзНржпрж╛ржиржб!';
    let showCloseAppBtn = true; 

    // ржмрзНржпрж╛ржи рж╕рзНржЯрзНржпрж╛ржЯрж╛рж╕ ржЯрзНрж░рзНржпрж╛ржХрж┐ржВ
    if (isBanned || bannedUntil) {
        localStorage.setItem('wasBanned', 'true');
    }

    if (isBanned) {
        message = 'ржЖржкржирж╛рж░ ржПржХрж╛ржЙржирзНржЯ рж╕рзНржерж╛рзЯрзАржнрж╛ржмрзЗ ржмрзНржпрж╛ржи ржХрж░рж╛ рж╣рзЯрзЗржЫрзЗред ржЕржирзБржЧрзНрж░рж╣ ржХрж░рзЗ рж╕рж╛ржкрзЛрж░рзНржЯрзЗ ржпрзЛржЧрж╛ржпрзЛржЧ ржХрж░рзБржиред';
    } else if (bannedUntil) {
        title = 'тП╕ ржПржХрж╛ржЙржирзНржЯ рж╕рж╛рж╕ржкрзЗржирзНржбржб!';
        message = `ржЖржкржирж╛рж░ ржПржХрж╛ржЙржирзНржЯржЯрж┐ рж╕рж╛ржоржпрж╝рж┐ржХржнрж╛ржмрзЗ рж╕рж╛рж╕ржкрзЗржирзНржб ржХрж░рж╛ рж╣ржпрж╝рзЗржЫрзЗред`; 
        showCloseAppBtn = false; 
    } else {
        return;
    }
    
    // ржирждрзБржи getPopupHTML ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ ржкржкржЖржк рждрзИрж░рж┐
    const popupHTML = getPopupHTML(title, message, showCloseAppBtn ? 'Close App' : null);
    document.body.insertAdjacentHTML('beforeend', popupHTML);

    // рж╕рж╛рж╕ржкрзЗржирзНржбрзЗрж░ ржЬржирзНржп ржЯрж╛ржЗржорж╛рж░ рж╢рзБрж░рзБ ржХрж░рж╛
    if (!isBanned && bannedUntil) {
        const popupOverlay = document.getElementById('dynamic-popup-overlay');
        startSuspensionTimer(bannedUntil, popupOverlay);
    } else if (showCloseAppBtn) {
        // ржкрж╛рж░рзНржорж╛ржирзЗржирзНржЯ ржмрзНржпрж╛ржирзЗрж░ ржЬржирзНржп
        const primaryBtn = document.getElementById('popup-primary-btn');
        if (primaryBtn) {
            primaryBtn.onclick = () => tg.close();
        }
    }
    
    // ржорзЗржи ржмрзНржпрж╛рж▓рзЗржирзНрж╕ ржлрзНрж░рж┐ржЬ ржжрзЗржЦрж╛ржирзЛ
    document.getElementById('balance').textContent = 'FREEZED'; 
    
    // ржмрзНржпрж╛ржХ ржмрж╛ржЯржи ржУ ржЕржирзНржпрж╛ржирзНржп ржлрж╛ржВрж╢ржи ржмржирзНржз
    tg.BackButton.hide();
}
// ===========================================
// ЁЯФе ржирждрзБржи ржХрзЛржб рж╢рзЗрж╖: ржмрзНржпрж╛ржи/рж╕рж╛рж╕ржкрзЗржирж╢ржи ржПржмржВ ржкржкржЖржк ржлрж┐ржХрзНрж╕
// ===========================================

// ржирж╛ржо + ржЫржмрж┐
document.getElementById('user-name').textContent = user?.first_name || 'ржЕржЬрж╛ржирж╛';
const avatar = document.getElementById('user-avatar');
if (user?.photo_url) {
  avatar.src = user.photo_url + '?size=big';
} else {
  const initial = (user?.first_name?.[0] || 'U').toUpperCase();
  avatar.src = `https://ui-avatars.com/api/?name=${initial}&background=00aaff&color=fff&size=128&bold=true`;
}


// рж░рж┐ржпрж╝рзЗрж▓ржЯрж╛ржЗржо ржмрзНржпрж╛рж▓рзЗржирзНрж╕ ржУ ржмрзНржпрж╛ржи ржЪрзЗржХ
userRef.onSnapshot(doc => {
  if (doc.exists) {
    const data = doc.data();
    document.getElementById('balance').textContent = data.balance || 0;
    
    // ржмрзНржпрж╛ржи/рж╕рж╛рж╕ржкрзЗржирзНржб ржЪрзЗржХ
    const isBanned = data.isBanned || false;
    const bannedUntil = data.bannedUntil?.toDate();
    const isSuspended = bannedUntil && bannedUntil > new Date();
    
    if (isBanned || isSuspended) {
      showBanPopup(isBanned, bannedUntil);
      return;
    }
    
    // ЁЯФе ржирждрзБржи ржХрзЛржб рж╢рзБрж░рзБ: ржмрзНржпрж╛ржи/рж╕рж╛рж╕ржкрзЗржирзНржб ржерзЗржХрзЗ ржЖржиржмрзНржпрж╛ржи рж╣рж▓рзЗ ржХржВржЧрзНрж░рж╛ржЪрзБрж▓рзЗрж╢ржи ржкржкржЖржк ржжрзЗржЦрж╛ржи
    const wasBanned = localStorage.getItem('wasBanned');
    if (!isBanned && !isSuspended && wasBanned === 'true') {
        localStorage.removeItem('wasBanned'); // ржлрзНрж▓рзНржпрж╛ржЧ рж╕рж░рж╛ржи
        if (window.suspensionInterval) {
            clearInterval(window.suspensionInterval);
        }
        showCongratulationsPopup('ржЖржкржирж╛рж░ ржПржХрж╛ржЙржирзНржЯ рж╕ржлрж▓ржнрж╛ржмрзЗ ржЖржиржмрзНржпрж╛ржи ржХрж░рж╛ рж╣рзЯрзЗржЫрзЗред');
    }
    // ЁЯФе ржирждрзБржи ржХрзЛржб рж╢рзЗрж╖
  }
});
    </script>
</body>
</html>
